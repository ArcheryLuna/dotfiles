(()=>{"use strict";var t={679:(t,e)=>{function r(t,e){return t.length===e.length&&(t===e||t.toLowerCase()===e.toLowerCase())}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldActivateForAuthority=e.onceSuccessfully=e.getRemoteName=e.AuthorityHierarchy=e.getDistroFromAuthority=e.isAuthorityWsl=e.getAuthorityFromDistro=e.isWSL1=e.isDockerDesktopDistro=e.isEqualAuthority=e.compareCaseInsensitive=void 0,e.compareCaseInsensitive=r,e.isEqualAuthority=function(t,e){return void 0===t?void 0===e:void 0!==e&&r(t,e)},e.isDockerDesktopDistro=function(t){return/^docker-desktop(-data)?$/.test(t)},e.isWSL1=function(t){return-1!==t.indexOf("Microsoft")},e.getAuthorityFromDistro=function(t="default",e){return e?`wsl+${t}@${e}`:"wsl+"+t},e.isAuthorityWsl=function(t){return t.startsWith("wsl+")},e.getDistroFromAuthority=function(t){let e,r;if(t.startsWith("wsl+")&&(e=t.substring(4)),!e)return;const s=e.indexOf("@"),u=e.indexOf("%40"),o=Math.min(-1===s?1/0:s,-1===u?1/0:u);return isFinite(o)&&(r=e.slice(o+1),e=e.slice(0,o)),"default"===e&&(e=void 0),{hostAuthority:r,distro:e}};class s{static parse(t){return new s(t,t.split(/@|%40/g).reverse())}get length(){return this.parts.length}get host(){return this.last.startsWith("wsl+")?1===this.parts.length?void 0:this.parts.slice(0,-1).reverse().join("@"):this.parts.slice().reverse().join("@")}get last(){return this.parts[this.parts.length-1]}constructor(t,e){this.value=t,this.parts=e}has(t){const e=t+"+";return this.parts.some((t=>t.startsWith(e)))}toString(){return this.parts.join(" > ")}}e.AuthorityHierarchy=s,e.getRemoteName=function(t){const e=t.indexOf("+");return-1!==e?t.substring(0,e):t},e.onceSuccessfully=function(t){let e;return()=>(void 0!==e||(e=t(),e.catch((()=>{e=void 0}))),e)};const u=["tunnel+","wsl+"];e.shouldActivateForAuthority=function(t){return u.some((e=>t.startsWith(e)))}},9491:t=>{t.exports=require("assert")}},e={};function r(s){var u=e[s];if(void 0!==u)return u.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,r),o.exports}var s={};(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0});const e=r(679),u=r(9491);suite("distro in authority",(()=>{test("default",(function(){u.equal((0,e.getAuthorityFromDistro)(),"wsl+default"),u.deepEqual((0,e.getDistroFromAuthority)("wsl+default"),{distro:void 0,hostAuthority:void 0})})),test("simple",(function(){u.equal((0,e.getAuthorityFromDistro)("ubuntu"),"wsl+ubuntu"),u.deepEqual((0,e.getDistroFromAuthority)("wsl+ubuntu"),{distro:"ubuntu",hostAuthority:void 0}),u.equal((0,e.getAuthorityFromDistro)("ubuntu-18.04"),"wsl+ubuntu-18.04"),u.deepEqual((0,e.getDistroFromAuthority)("wsl+ubuntu-18.04"),{distro:"ubuntu-18.04",hostAuthority:void 0})})),test("hosted",(function(){u.equal((0,e.getAuthorityFromDistro)("ubuntu","tunnel+surface"),"wsl+ubuntu@tunnel+surface"),u.deepEqual((0,e.getDistroFromAuthority)("wsl+ubuntu@tunnel+surface"),{distro:"ubuntu",hostAuthority:"tunnel+surface"}),u.equal((0,e.getAuthorityFromDistro)(void 0,"tunnel+surface"),"wsl+default@tunnel+surface"),u.deepEqual((0,e.getDistroFromAuthority)("wsl+default@tunnel+surface"),{distro:void 0,hostAuthority:"tunnel+surface"})}))}))})();var u=exports;for(var o in s)u[o]=s[o];s.__esModule&&Object.defineProperty(u,"__esModule",{value:!0})})();
//# sourceMappingURL=utils.test.js.map